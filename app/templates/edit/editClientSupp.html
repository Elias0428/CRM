{% extends "index.html" %}
{% load static %}
{% block head %}
    <title>Client Supplementary</title>
	<!--plugins-->
	<link href="{% static "assets/plugins/simplebar/css/simplebar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/metismenu/css/metisMenu.min.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/datatable/css/dataTables.bootstrap5.min.css" %}" rel="stylesheet" />
	<!-- loader-->
	<link href="{% static "assets/css/pace.min.css" %}" rel="stylesheet" />
	<script src="{% static "assets/js/pace.min.js" %}"></script>
	<!-- Bootstrap CSS -->
	<link href="{% static "assets/css/bootstrap.min.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/bootstrap-extended.css" %}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&amp;display=swap" rel="stylesheet">
	<link href="{% static "assets/css/app.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/icons.css" %}" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
	<!-- Theme Style CSS -->
	<link rel="stylesheet" href="{% static "assets/css/dark-theme.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/semi-dark.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/header-colors.css" %}" />
{% endblock %}
{% block page_content %}
<h6 class="mb-0 text-uppercase">Client supplementary</h6>
<hr/>
<div class="row">
    <div class="col-xl-10 mx-auto">
        <div class="card">
            <div class="card-body p-4">
                <form class="row g-3 needs-validation" method="POST">
                    <h4>Client</h4>
                    <div class="col-12 col-lg-2">
						<label for="agent_usa" class="form-label font-weight-bold">Agente USA</label>
						<select class="form-select" id="agent_usa" aria-label="Default select example" name="agent_usa"  >
							<option value="Daniel" {% if supps.client.agent_usa == "Daniel" %}selected{% endif %} >Daniel</option>
							<option value="Zohira" {% if supps.client.agent_usa == "Zohira" %}selected{% endif %}  >Zohira</option>
							<option value="Gina" {% if supps.client.agent_usa == "Gina" %}selected{% endif %} >Gina</option>
							<option value="Diego" {% if supps.client.agent_usa == "Diego" %}selected{% endif %} >Diego</option>
							<option value="Danieska" {% if supps.client.agent_usa == "Danieska" %}selected{% endif %} >Danieska</option>
							<option value="Vladimir" {% if supps.client.agent_usa == "Vladimir" %}selected{% endif %} >Vladimir</option>
							<option value="Luis" {% if supps.client.agent_usa == "Luis" %}selected{% endif %} >Luis</option>
							<option value="Borja" {% if supps.client.agent_usa == "Borja" %}selected{% endif %} >Borja</option>
							<option value="Rodrigo" {% if supps.client.agent_usa == "Rodrigo" %}selected{% endif %} >Rodrigo</option>
							<option value="Evelyn" {% if supps.client.agent_usa == "Evelyn" %}selected{% endif %} >Evelyn</option>
						</select>
					</div>
					<div class="col-12 col-lg-5">
						<label for="first_name" class="form-label">First Name</label>
						<input type="text" class="form-control" name="first_name" id="first_name" placeholder="First Name" value="{{supps.client.first_name}}">
						<input hidden class="form-control" name="id_client" id="id_client" value="{{supps.client.id}}">
					</div>
					<div class="col-12 col-lg-5">
						<label for="last_name" class="form-label">Last Name</label>
						<input type="text" class="form-control" name="last_name" id="last_name" placeholder="Last Name" value="{{supps.client.last_name}}">
					</div>
					<div class="col-12 col-lg-2">
						<label for="phone_number" class="form-label">Phone Number</label>
						<input type="number" class="form-control" name ="phone_number" id="phone_number" placeholder="Phone Number" value="{{supps.client.phone_number}}">
					</div>
					<div class="col-12 col-lg-5">
						<label for="email" class="form-label">E-mail Address</label>
						<input type="email" class="form-control" name="email" id="email" placeholder="Enter Email Address" value="{{supps.client.email}}">
					</div>
					<div class="col-12 col-lg-5">
						<label for="address" class="form-label">Address</label>
						<input type="text" class="form-control" name="address" id="address" placeholder="Address" value="{{supps.client.address}}">
					</div>
					<div class="col-12 col-lg-2">
						<label for="zipcode" class="form-label">zipCode</label>
						<input type="number" class="form-control" name ="zipcode" id="zipcode" placeholder="ZIP-CODE" value="{{supps.client.zipcode}}">
					</div>
					<div class="col-12 col-lg-2">
						<label for="city" class="form-label">City</label>
						<input type="text" class="form-control" name ="city" id="city" value="{{supps.client.city}}">
					</div>
					<div class="col-12 col-lg-2">
						<label for="state" class="form-label font-weight-bold">State</label>
						<select id="inputState" class="form-select" id="state" name="state" >
							<option value="">---</option>
							<option value="AL" {% if supps.client.state == "AL" %}selected{% endif %} > AL </option>
							<option value="AR" {% if supps.client.state == "AR" %}selected{% endif %} > AR </option>
							<option value="AZ" {% if supps.client.state == "AZ" %}selected{% endif %} > AZ </option>
							<option value="CA" {% if supps.client.state == "AZ" %}selected{% endif %} > CA </option>
							<option value="DE" {% if supps.client.state == "DE" %}selected{% endif %} > DE </option>
							<option value="FL" {% if supps.client.state == "FL" %}selected{% endif %} > FL </option>
							<option value="GA" {% if supps.client.state == "GA" %}selected{% endif %} > GA </option>
							<option value="IL" {% if supps.client.state == "IL" %}selected{% endif %} > IL </option>
							<option value="IA" {% if supps.client.state == "IA" %}selected{% endif %} > IA </option>
							<option value="KS" {% if supps.client.state == "KS" %}selected{% endif %} > KS </option>
							<option Value="MI" {% if supps.client.state == "MI" %}selected{% endif %} > MI </option>                            
							<option value="MS" {% if supps.client.state == "MS" %}selected{% endif %} > MS </option>
							<option Value="MO" {% if supps.client.state == "MO" %}selected{% endif %} > MO </option>
							<option value="NJ" {% if supps.client.state == "NJ" %}selected{% endif %} > NJ </option>
							<option value="NC" {% if supps.client.state == "NC" %}selected{% endif %} > NC </option>
							<option value="ND" {% if supps.client.state == "ND" %}selected{% endif %} > ND </option>
							<option value="NE" {% if supps.client.state == "NE" %}selected{% endif %} > NE </option>
							<option value="OH" {% if supps.client.state == "OH" %}selected{% endif %} > OH </option>
							<option value="OK" {% if supps.client.state == "OK" %}selected{% endif %} > OK </option>
							<option value="SC" {% if supps.client.state == "SC" %}selected{% endif %} > SC </option>
							<option value="TN" {% if supps.client.state == "TN" %}selected{% endif %} > TN </option>
							<option value="TX" {% if supps.client.state == "TX" %}selected{% endif %} > TX </option>
							<option value="UT" {% if supps.client.state == "UT" %}selected{% endif %} > UT </option>
							<option value="VA" {% if supps.client.state == "VA" %}selected{% endif %} > VA </option>
							<option value="WI" {% if supps.client.state == "WI" %}selected{% endif %} > WI </option>
							<option value="LA" {% if supps.client.state == "LA" %}selected{% endif %} > LA </option>
							<option value="IN" {% if supps.client.state == "IN" %}selected{% endif %} > IN </option>
							<option value="OR" {% if supps.client.state == "OR" %}selected{% endif %} > OR </option>
						</select>
					</div>
					<div class="col-12 col-lg-2">
						<label for="country" class="form-label">Country</label>
						<input type="text" class="form-control" name ="country" id="country" placeholder="Country" value="{{supps.client.county}}">
					</div>
					<div class="col-12 col-lg-2">
						<label for="sex" class="form-label">Sex</label>
						<select class="form-select"  name="sex" id="sex" aria-label="Default select example">
							<option value="">---</option>
							<option value="M" {% if supps.client.sex == "M" %}selected{% endif %} >MASCULINO</option>
							<option value="F" {% if supps.client.sex == "F" %}selected{% endif %} >FEMENINO</option>
						</select>
					</div>
					<div class="col-12 col-lg-2">
						<label for="old" class="form-label">Old</label>
						<input type="number" nim="1" class="form-control" name ="old" id="old" placeholder="Old" value="{{supps.client.old}}">
					</div>
					<div class="col-12 col-lg-3">
						<label for="date_birth" class="form-label">Date Birth</label>
                        <input type="date" class="form-control" value="{{ supps.client.date_birth|date:'Y-m-d' }}" id="date_birth" name="date_birth">
					</div>
					<div class="col-12 col-lg-6">
						<label for="migration_status" class="form-label">Migration Status</label>
						<select class="form-select" id="migration_status"  name="migration_status" required  >
							<option value="">---</option>
							<option value="Green Card" {% if supps.client.migration_status == "Green Card" %}selected{% endif %} >Green Card</option>
							<option value="Autorizacion de Empleo" {% if supps.client.migration_status == "Autorizacion de Empleo" %}selected{% endif %} >Autorizacion de Empleo</option>
							<option value="Notice of Action (i-797)" {% if supps.client.migration_status == "Notice of Action (i-797)" %}selected{% endif %} >Notice of Action (i-797)</option>
							<option value="Refugiado" {% if supps.client.migration_status == "Refugiado" %}selected{% endif %} >Refugiado</option>
							<option value="Asilo" {% if supps.client.migration_status == "Asilo" %}selected{% endif %} >Asilo</option>
							<option value="Temporary Protection Status (TPS)" {% if supps.client.migration_status == "Temporary Protection Status (TPS)" %}selected{% endif %} >Temporary Protection Status (TPS)</option>
							<option value="Violencia Domestica" {% if supps.client.migration_status == "Violencia Domestica" %}selected{% endif %} >Violencia Domestica</option>
							<option value="Residencia Condicional" {% if supps.client.migration_status == "Residencia Condicional" %}selected{% endif %} >Residencia Condicional</option>
							<option value="Parole" {% if supps.client.migration_status == "Parole" %}selected{% endif %} >Parole</option>
							<option value="Ciudadano USA (Licencia de Manejo)"{% if supps.client.migration_status == "Ciudadano USA (Licencia de Manejo)" %}selected{% endif %} >Ciudadano USA (Licencia de Manejo)</option>
							<option value="Vista de Estudiante (i-120)" {% if supps.client.migration_status == "Vista de Estudiante (i-120)" %}selected{% endif %} >Vista de Estudiante (i-120)</option>
							<option value="En Proceso actual" {% if supps.client.migration_status == "n Proceso actual" %}selected{% endif %} >En Proceso actual</option>
							<option value="Inicio de Proceso Migratorio 3-6 meses" {% if supps.client.migration_status == "Inicio de Proceso Migratorio 3-6 meses" %}selected{% endif %} >Inicio de Proceso Migratorio 3-6 meses</option>
						</select>
					</div>
                    <hr>
                    <h4>Dependents</h4>
                    {% for dependent in dependents %}
                    <div class="col-12 col-lg-4">
                        <label class="form-label">Name of Dependent</label>
                        <input type="hidden" name="dependentId" value="{{ dependent.id }}">
                        <input type="text" class="form-control" name="nameDependent" value="{{dependent.name}}" >
                    </div>
                    <div class="col-12 col-lg-2">
                        <label class="form-label">Apply</label>
                        <select class="form-select" name="applyDependent">
                            <option value="">---</option>
                            <option value="SI" {% if dependent.apply == "SI" %}selected{% endif %}>SI</option>
							<option value="NO" {% if dependent.apply == "NO" %}selected{% endif %}>NO</option>
                        </select>
                    </div>
                    <div class="col-12 col-lg-3">
                        <label class="form-label">Date Birth</label>
                        {% if dependent.date_birth %}
							<input type="date" class="form-control" value="{{ dependent.date_birth|date:'Y-m-d' }}" id="dateBirthDependent" name="dateBirthDependent">
						{% else %}
							<input type="date" class="form-control" id="dateBirthDependent" name="dateBirthDependent">	
						{% endif %}	                        
                    </div>
                    <div class="col-12 col-lg-3">
                        <label class="form-label">Sex</label>
                        <select class="form-select" name="sexDependent">
                            <option value="">---</option>
                            <option value="M" {% if dependent.sex == "M" %}selected{% endif %}>MASCULINO</option>
							<option value="F" {% if dependent.sex == "F" %}selected{% endif %}>FEMENINO</option>
                        </select>
                    </div>
                    <div class="col-12 col-lg-6">
                        <label class="form-label">Migration Status</label>
                        <select class="form-select" name="migrationStatusDependent">
                            <option value="">---</option>
                            <option value="Green Card" {% if dependent.migration_status == "Green Card" %}selected{% endif %}>Green Card</option>
							<option value="Autorizacion de Empleo" {% if dependent.migration_status == "Autorizacion de Empleo" %}selected{% endif %}>Autorizacion de Empleo</option>
                        </select>
                    </div>
                    
                    <div class="col-12 col-lg-6">
                        <label for="kinship" class="form-label">Kinship</label>
                        <select class="form-select" id="kinship" name="kinship" aria-label="Default select example">
                            <option value="">---</option>
                            <option value="DAD" {% if dependent.kinship == 'DAD' %}selected{% endif %}>DAD</option>
                            <option value="MOM" {% if dependent.kinship == 'MOM' %}selected{% endif %}>MOM</option>
                            <option value="SON" {% if dependent.kinship == 'SON' %}selected{% endif %}>SON</option>
                            <option value="GRANDPARENT" {% if dependent.kinship == 'GRANDPARENT' %}selected{% endif %}>GRANDPARENT</option>
                            <option value="GRANDMOTHER" {% if dependent.kinship == 'GRANDMOTHER' %}selected{% endif %}>GRANDMOTHER</option>
                            <option value="COUPLE" {% if dependent.kinship == 'COUPLE' %}selected{% endif %}>COUPLE</option>
                        </select>
                    </div>
                   <hr/>
                    {% endfor %}
                    <H4>Plan</H4>
                    <div class="col-12 col-lg-3">
						<label for="effectiveDateSupp" class="form-label">Effective Date</label>
						{% if supps.effective_date %}
							<input type="date" class="form-control"  value="{{ supps.effective_date|date:'Y-m-d' }}" id="effectiveDateSupp" name="effectiveDateSupp">
						{% else %}
							<input type="date" class="form-control"  id="effectiveDateSupp" name="effectiveDateSupp">	
						{% endif %}
					</div>
					<div class="col-12 col-lg-4">
						<label for="carrierSuple" class="form-label">Carrier</label>
						<select class="form-select" id="carrierSuple"  aria-label="Default select example" name="carrierSuple">
							<option>---</option>
							<option value="AFLAC" {% if supps.company == 'AFLAC' %}selected{% endif %}> AFLAC</option>                             
							<option value="AETNA" {% if supps.company == 'AETNA' %}selected{% endif %}> AETNA </option>
							<option value="ALLSTATE HEALTH SOLUTIONS" {% if supps.company == 'ALLSTATE HEALTH SOLUTIONS' %}selected{% endif %}> ALLSTATE HEALTH SOLUTIONS </option>  
							<option value="COMBINED" {% if supps.company == 'COMBINED' %}selected{% endif %}> COMBINED </option>
							<option value="CIGNA" {% if supps.company == 'CIGNA' %}selected{% endif %}> CIGNA </option>    
							<option value="MANHATTAN LIFE" {% if supps.company == 'MANHATTAN LIFE' %}selected{% endif %}> MANHATTAN LIFE </option>
							<option value="METLIFE" {% if supps.company == 'METLIFE' %}selected{% endif %}> METLIFE </option>
							<option value="OSCAR" {% if supps.company == 'OSCAR' %}selected{% endif %}> OSCAR</option> 
							<option value="PIVOT" {% if supps.company|default:'' == 'PIVOT' %}selected{% endif %}>PIVOT</option>  
							<option value="SUREBRIDGE" {% if supps.company == 'SUREBRIDGE' %}selected{% endif %}> SUREBRIDGE </option>    
							<option value="UNITED" {% if supps.company == 'UNITED' %}selected{% endif %}> UNITED </option>    
							</select>
					</div>
					<div class="col-12 col-lg-3">
						<label for="premiumSupp" class="form-label">Premium</label>
						<input type="number" class="form-control"  id="premiumSupp" value="{{supps.premium}}"  name="premiumSupp" >
					</div>
					<div class="col-12 col-lg-2">
						<label for="preventiveSupp" class="form-label">Preventive</label>
						<select class="form-select" id="preventiveSupp"  name="preventiveSupp" aria-label="Default select example">
							<option selected disable></option>
							<option value="60" {% if supps.preventive == '60' %}selected{% endif %}>60% </option>
							<option value="100" {% if supps.preventive == '100' %}selected{% endif %}>100%</option>
							<option value="Sin Espera" {% if supps.preventive == 'Sin Espera' %}selected{% endif %}>Sin Espera</option>
						</select>
					</div>
					<div class="col-12 col-lg-6">
						<label for="policyTypeSupp" class="form-label">Policy Type</label>
						<select class="form-select" id="policyTypeSupp"  name="policyTypeSupp" aria-label="Default select example">
							<option>---</option>
							<option value="ACCIDENTE" {% if supps.policy_type == 'ACCIDENTE' %}selected{% endif %} >ACCIDENTE</option>
								<option value="HOSPITALIZACION" {% if supps.policy_type == 'HOSPITALIZACION' %}selected{% endif %} >HOSPITALIZACION</option>
								<option value="DENTAL" {% if supps.policy_type == 'DENTAL' %}selected{% endif %} >DENTAL</option>
								<option value="ENFERMEDADES CRITICAS" {% if supps.policy_type == 'ENFERMEDADES CRITICAS' %}selected{% endif %} >ENFERMEDADES CRITICAS</option>
								<option value="VISUAL" {% if supps.policy_type == 'VISUAL' %}selected{% endif %} >VISUAL</option>
								<option value="DENTAL Y VISUAL" {% if supps.policy_type == 'DENTAL Y VISUAL' %}selected{% endif %} >DENTAL Y VISUAL</option>
								<option value="PLAN DE DESCUENTO" {% if supps.policy_type == 'PLAN DE DESCUENTO' %}selected{% endif %} >PLAN DE DESCUENTO</option>
								<option value="SHORT TERM MEDICAL" {% if supps.policy_type == 'SHORT TERM MEDICAL' %}selected{% endif %} >SHORT TERM MEDICAL</option>
								<option value="CANCER" {% if supps.policy_type == 'CANCER' %}selected{% endif %} >CANCER</option>
							</select>
					</div>					
					<div class="col-12 col-lg-3">
						<label for="coverageSupp" class="form-label">Coverage</label>
						<select class="form-select" id="coverageSupp"  name="coverageSupp" aria-label="Default select example">
							<option>---</option>
							<option value="500" {% if supps.coverage == 500 %}selected{% endif %} >500</option>
								<option value="750" {% if supps.coverage == 750 %}selected{% endif %} >750</option>
								<option value="1000" {% if supps.coverage == 1000 %}selected{% endif %} >1000</option>
								<option value="1500" {% if supps.coverage == 1500 %}selected{% endif %} >1500</option>
								<option value="2000" {% if supps.coverage == 2000 %}selected{% endif %} >2000</option>
								<option value="2500" {% if supps.coverage == 2500 %}selected{% endif %} >2500</option>
								<option value="3000" {% if supps.coverage == 3000 %}selected{% endif %} >3000</option>
								<option value="3500" {% if supps.coverage == 3500 %}selected{% endif %} >3500</option>
								<option value="4000" {% if supps.coverage == 4000 %}selected{% endif %} >4000</option>
								<option value="4500" {% if supps.coverage == 4500 %}selected{% endif %} >4500</option>
								<option value="5000" {% if supps.coverage == 5000 %}selected{% endif %} >5000</option>
								<option value="10000" {% if supps.coverage == 10000 %}selected{% endif %} >10000</option>
						</select>
					</div>
					<div class="col-12 col-lg-3">
						<label for="deducibleSupp" class="form-label">Deducible</label>
						<select class="form-select" id="deducibleSupp"  name="deducibleSupp"  aria-label="Default select example">
							<option>---</option>
							<option value="100" {% if supps.deducible == 100 %}selected{% endif %} >100</option>
								<option value="50" {% if supps.deducible == 50 %}selected{% endif %} >50</option>
								<option value="0" {% if supps.deducible == 0 %}selected{% endif %} >0</option>
						</select>
					</div>
					<div class="col-12 col-lg-2">
						<label for="statusSupp" class="form-label">Status</label>
						<select class="form-select" id="statusSupp"  name="statusSupp"  aria-label="Default select example">
							<option>---</option>
								{% for  list_drow in list_drow %}
									<option value="{{list_drow.profiling_supp}}" {% if supps.status == list_drow.profiling_supp %}selected{% endif %} >{{list_drow.profiling_supp}}</option>                      
								{% endfor %}						
						</select>
					</div>
					<div class="col-12 col-lg-2">
						<label for="typePaymeSupp" class="form-label">Type Paymet</label>
						<select class="form-select" id="typePaymeSupp"  name="typePaymeSupp"  aria-label="Default select example">
							<option>---</option>
							<option value="CARD" {% if supps.payment_type == 'CARD' %}selected{% endif %} >CARD</option>
							<option value="BANK ACCOUNT" {% if supps.payment_type == 'BANK ACCOUNT' %}selected{% endif %} >BANK ACCOUNT</option>
						</select>
					</div>
					<div class="col-12 col-lg-4">
                        <label for="date_effective_coverage" class="form-label">Date Effective Coverage</label>
                        <input type="date" class="form-control" id="date_effective_coverage" name="date_effective_coverage" value="{{ supps.date_effective_coverage }}"  >
                    </div>
                    <div class="col-12 col-lg-4">
                        <label for="date_effective_coverage_end" class="form-label">Date Effective Coverage End</label>
                        <input type="date" class="form-control" id="date_effective_coverage_end" name="date_effective_coverage_end" value="{{ supps.date_effective_coverage_end }}"  >
                    </div> 
					<div class="col-12 col-lg-6">
						<label for="observationSuple" class="form-label">Observation</label>
						<textarea class="form-control" id="observationSuple" name="observationSuple" rows="3" type="text" placeholder="Supplementary plan remark" style="resize: none">{{supps.observation}}</textarea>
					</div>
					<div class="col-12 col-lg-6">
                        <label for="observationObama" class="form-label">Observation Agent</label>
                        <textarea class="form-control" id="observationObama" name="observationObama" disabled rows="3" placeholder="Obamacare plan observation" style="resize: none">{{ obsSuppText }}</textarea>
                    </div>
					{% if request.user.role == 'A' %}
					<div class="col-12 col-lg-6" id="obs_agent">
                        <label for="obs_agent" class="form-label">OBS. AGENT</label>
                        <input type="text" class="form-control" id="obs_agent" name="obs_agent"  >
                    </div> 
					{% endif %}
                    <hr> 					                  
                    <div class="col-md-12">
                        <div class="d-md-flex d-grid align-items-center gap-3">
							<button type="submit" name="action" value="save_supp" id="enviar" class="btn btn-primary px-4"  >Submit</button>
							<button type="submit" name="action" id="enviar2" value="save_supp_agent" class="btn btn-primary px-4" style="display: none;">Submits</button>                            
							<a href="{% url 'clientSupp' %}" class="btn btn-light px-4">Back</a>
                        </div>
                    </div>
                    {% csrf_token %}	
                </form>
				<hr>
				{% if request.user.role != 'A' %}
				<h5>Type Entry:</h5>
				<div class="col-12 col-lg-12">
					<!-- Botones para abrir los modales -->
					<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalIngresarTexto">
						Enter Observation
					</button>
					<button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#modalVerTexto">
						See Observations
					</button>
			
					<!-- Modal para ingresar texto -->
					<div class="modal fade" id="modalIngresarTexto" tabindex="-1" aria-labelledby="modalIngresarTextoLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalIngresarTextoLabel">Enter Observation</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<form id="formIngresarTexto" action="{% url 'saveCustomerObservation' %}" method="POST">
										{% csrf_token %}
										<input type="hidden" name="plan_id" value="{{ supps.id }}">
										<input type="hidden" name="type_plan" value="SUPP">
										<div class="mb-3">
											<label for="textoIngresado" class="form-label">Text:</label>
											<textarea class="form-control" id="textoIngresado" name="textoIngresado" rows="4" required></textarea>
										</div>
										<div class="mb-3">
											<label for="textoIngresado" class="form-label">Typification:</label>
											<select class="form-select"  name="observaciones[]"  id="textoIngresados" multiple>
												<option></option>
												<option value="1095-A" >1095-A</option>
												<option value="AUDITADAS" >Auditadas</option>
												<option value="ACTIVO" >Activo</option>
												<option value="CANCELAR" >Cancelar</option>
												<option value="CAMBIO DE PLAN" >Cambio de plan</option>
												<option value="CAMBIO DE AGENTE" >Cambio de agente</option>
												<option value="CAMBIO T/C" >Cambio T/C</option>
												<option value="CARRIER" >Carrier</option>
												<option value="CITAS" >Citas</option>
												<option value="CLIENTE SATISFECHO" >Clientes Satisfecho</option>
												<option value="CORRECION" >Correcion</option>
												<option value="CORRECCION DE ERROR DE PAGO">Corrección de Error de Pago</option>
												<option value="CREACION DE PORTAL/MEMBER ID/BRICHURE"> Creación de Portal/Member ID/Brochure</option>
												<option value="DATOS DEMOGRAFICOS"> Datos demográficoS</option>
												<option value="DOCUMENTOS EN SHERPA" >Documentos en el Sherpa</option>
												<option value="DOCUMENTOS RECIBIDOS" >Documentos Recibidos</option>
												<option value="ENVIO ID" >Envío ID</option>
												<option value="ENVIO DENTISTA" >Envío Dentista</option>
												<option value="ENVIO OCULISTA" >Envío Oculista</option>
												<option value="EXPLICACION PLAN" >Explicacion del Plan</option>
												<option value="FUERA DE SERVICIO" >Fuera de Servicio</option>
												<option value="HEALTHSAFE ID" >HEALTHSAFE ID</option>
												<option value="ID MEMBER" >ID-Member</option>
												<option value="ID SUP" >Id Sup</option>
												<option value="LLAMADA CARRIER SUP" >Llamada Carrier Sup</option>
												<option value="LLAMADA EFECTIVA" >Llamada Efectiva</option>
												<option value="MENSAJE DE BIENVENIDA" >Mensaje de Bienvenida</option>
												<option value="MENSAJE INFORMATIVO" >Mensaje Informativo</option>
												<option value="NO CONTESTA" >No Contesta</option>                           
												<option value="OTHER PARTY">Other Party</option>
												<option value="PAGO DENTAL VIA UHC">PAGO DENTAL VIA UHC</option>
												<option value="PAGO VISION VIA UHC">PAGO VISION VIA UHC</option>
												<option value="PORTAL CARRIER ACA">Portal carrier aca</option>
												<option value="RECIBO TARJETA">Recibo de Tarjetas</option>
												<option value="RECUPERADA">Recuperada</option>
												<option value="REFERIDOS">Referidos</option>
												<option value="RODADAS">Rodadas</option>
												<option value="PAGO PRIMA">Pago Prima</option>                         
												<option value="PCP">PCP</option>
												<option value="SOLICITAR DOCUMENTOS">Solicitar Docmuentos</option>
												<option value="SUPLEMENTARIO">Suplementario</option>
												<option value="TRANSFERENCIA">Transferencia</option>
												<option value="UHC ID READY">UHC ID READY</option>
												<option value="VOLVER A LLAMAR">Volver a Llamar</option>
												<option value="LLAMADAS INFORMATIVAS ACA/SUP">Llamadas informativas acá / suplementarios </option>
												<option value="CUELGA">Cuelga</option>
											</select>
										</div>
										<div class="mb-3">
											<label for="textoIngresado" class="form-label">Typification the Call:</label>
											<select class="form-select"  name="typeCall" >
												<option></option>
												<option value="INBOUND" >Inbound </option>
												<option value="OUTBOUND" >Outbound </option>
												<option value="WHATSAPP" >WhatsApp</option>
												<option value="TXT MESSAGE" >Txt Message</option>
												<option value="SHERPA" >Sherpa</option>
											</select>
										</div>
										<button type="submit" class="btn btn-primary">Guardar</button>
									</form>
									
								</div>
							</div>
						</div>
					</div>
			
					<!-- Modal para ver las observaciones -->
					<div class="modal fade" id="modalVerTexto" tabindex="-1" aria-labelledby="modalVerTextoLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalVerTextoLabel">Saved Remarks</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									{% if obsCustomer %}
										<ul class="list-group">
											{% for observation in obsCustomer %}
												<li class="list-group-item">
													<strong>{{ observation.agent }}:</strong> {{ observation.content }} <strong>Date:</strong> {{ observation.created_at }}
												</li>
											{% endfor %}
										</ul>
									{% else %}
										<p>No hay observaciones guardadas.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
				</div>
				{% endif %} 
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block end_js %}
	<!-- Bootstrap JS -->
	<script src="{% static "assets/js/bootstrap.bundle.min.js" %}"></script>
	<!--plugins-->
	<script src="{% static "assets/js/jquery.min.js" %}"></script>
	<script src="{% static "assets/plugins/simplebar/js/simplebar.min.js" %}"></script>
	<script src="{% static "assets/plugins/metismenu/js/metisMenu.min.js" %}"></script>
	<script src="{% static "assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/jquery.dataTables.min.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/dataTables.bootstrap5.min.js" %}"></script>
	<!-- Incluir JS de Choices.js -->
	<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

	<!--app JS-->
	<script src="{% static "assets/js/app.js" %}"></script>
	{% if request.user.role == 'A' %}
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var form = document.querySelector('form');
			var formElements = form.querySelectorAll('input:not([type="hidden"]), select, textarea');
	
			// Deshabilitar todos los campos del formulario excepto los de tipo 'hidden'
			formElements.forEach(function (element) {
				if (element.id !== 'id_client') {  // Asegúrate de no deshabilitar 'id_client'
					element.disabled = true;
				}
			});
	
			// Manejar el div y el input de 'obs_agent'
			var divObsAgent = document.getElementById('obs_agent');
			var inputObsAgent = document.querySelector('input#obs_agent');
	
			// Condición para habilitar y mostrar el campo (modificar según sea necesario)
			var conditionMet = /* tu lógica aquí */ true; // Cambia esta lógica según lo que necesites
	
			if (conditionMet) {
				if (divObsAgent) divObsAgent.style.display = 'block'; // Mostrar el div
				if (inputObsAgent) inputObsAgent.disabled = false;    // Habilitar el input
			} else {
				if (divObsAgent) divObsAgent.style.display = 'none'; // Ocultar el div
			}
	
			// Opcional: Ocultar botón submit
			var submitButton = form.querySelector('button[id="enviar"]');
			var submitButton2 = form.querySelector('button[id="enviar2"]');
			if (submitButton && submitButton2) {
				submitButton.style.display = 'none';     // Oculta el primer botón submit
				submitButton2.style.display = 'inline';  // Muestra el segundo botón submit
			}
		});
	</script>	
	{% endif %} 

	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const selectElement = document.querySelector('#textoIngresados');
			const choices = new Choices(selectElement, {
				removeItemButton: true,  // Muestra el botón de eliminar las opciones seleccionadas
				searchEnabled: true,     // Habilita la búsqueda en el menú desplegable
				placeholderValue: 'Seleccione una opción...',
				itemSelectText: '',      // Elimina el texto 'Selecciona un elemento'
			});
		});
	</script>

	<!-- Personalización CSS para fondo oscuro -->
	<style>
		/* Estilo general del select */
		.choices__inner {
			background-color: #222; /* Fondo oscuro */
			color: #ddd; /* Texto en gris claro */
			font-family: 'Arial', sans-serif; /* Fuente moderna */
			border: 1px solid #444; /* Borde sutil */
			border-radius: 8px; /* Bordes redondeados */
			padding: 8px 12px; /* Espaciado interno */
			transition: all 0.3s ease; /* Transición suave */
		}
	
		/* Estilo para el borde cuando el select está enfocado */
		.choices__inner--focused {
			border-color: #3b82f6; /* Borde azul cuando está enfocado */
			box-shadow: 0 0 10px rgba(59, 130, 246, 0.3); /* Sombra sutil azul */
		}
	
		/* Estilo para las opciones dentro del dropdown */
		.choices__list--dropdown {
			background-color: #333; /* Fondo oscuro para el dropdown */
			color: #ddd; /* Texto claro */
			max-height: 250px; /* Altura máxima */
			overflow-y: auto; /* Desplazamiento si las opciones son muchas */
			border-radius: 8px; /* Bordes redondeados */
			box-shadow: 0 0 15px rgba(0, 0, 0, 0.2); /* Sombra suave */
			border: none; /* Sin borde */
		}
	
		/* Estilo para las opciones dentro del dropdown cuando están enfocadas */
		.choices__item--highlighted {
			background-color: #3b82f6; /* Fondo azul cuando se resalta */
			color: white; /* Texto blanco */
			cursor: pointer; /* Puntero */
		}
	
		/* Estilo para las opciones seleccionables dentro del dropdown */
		.choices__item--selectable {
			background-color: #444; /* Fondo oscuro */
			color: #ddd; /* Texto claro */
			padding: 8px 12px; /* Espaciado */
			transition: background-color 0.2s ease; /* Transición de color suave */
		}
	
		/* Estilo para las opciones seleccionadas en el campo */
		.choices__item {
			background-color: #3b82f6; /* Fondo azul */
			color: rgb(59, 59, 59); /* Texto blanco */
			padding: 6px 10px; /* Espaciado de las opciones seleccionadas */
			margin: 4px; /* Separación entre opciones */
			border-radius: 20px; /* Bordes redondeados */
			font-weight: bold; /* Texto en negrita */
			font-size: 14px; /* Tamaño de texto */
		}
	
		/* Estilo para el botón de eliminar de las opciones seleccionadas */
		.choices__button {
			color: #fff; /* Eliminar en blanco */
			font-size: 16px;
			background-color: transparent;
			border: none;
			margin-left: 8px;
			cursor: pointer;
		}
	
		.choices__button:hover {
			color: #f00; /* Cambiar color a rojo al pasar el mouse */
		}
	
		/* Fondo del área de texto al estar vacío */
		.choices__placeholder {
			color: #888; /* Color gris claro */
		}
	
		/* Ajustes para el input de búsqueda */
		.choices__input {
			background-color: #333; /* Fondo oscuro */
			color: #fff; /* Texto blanco */
			border: 1px solid #444; /* Borde oscuro */
			padding: 8px 12px; /* Espaciado interno */
			border-radius: 6px; /* Bordes redondeados */
		}
	</style>
	
	


{% endblock %}